<div class="row">
  <div class="col-lg-8 mx-auto">
    <div class="text-center mb-4">
      <h2 class="h3 fw-bold text-primary mb-2">
        <i class="bi bi-moon-stars-fill me-2"></i>
        Planetary Hours Calculator
      </h2>
      <p class="text-light">
        Discover the ancient wisdom of planetary hours and align your activities with cosmic energies
      </p>
    </div>

    <!-- Location Input Form -->
    <div class="card bg-dark border-primary mb-4">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">
          <i class="bi bi-geo-alt-fill me-2"></i>
          Location & Date
        </h5>
      </div>
      <div class="card-body">
        <%= form_with url: root_path, method: :get, local: true, class: "row g-3" do |form| %>
          <!-- First Row: Date (half width) -->
          <div class="row mb-3">
            <div class="col-md-3">
              <%= form.label :date, "Date", class: "form-label" %>
              <%= form.date_field :date, 
                  value: @date, 
                  class: "form-control bg-dark text-light border-secondary" %>
            </div>

            <div class="col-md-4">
              <%= form.label :location, "City or ZIP Code", class: "form-label" %>
              <%= form.text_field :location, 
                  class: "form-control bg-dark text-light border-secondary",
                  placeholder: "New York, NY or 10001",
                  id: "location-search",
                  autocomplete: "off" %>
              <div id="location-suggestions" class="list-group position-absolute w-100" style="z-index: 1000; display: none;"></div>
            </div>
              <div class="col-md-2">
                <button type="button" class="btn btn-success btn-lg w-100 mt-4" onclick="geocodeLocation()">
                  <i class="bi bi-search me-2"></i>
                  Get Coordinates
                </button>
              </div>
              <div class="col-md-2">
                <button type="button" class="btn btn-outline-info btn-lg w-100 mt-4" onclick="getCurrentLocation()">
                  <i class="bi bi-geo-alt me-2"></i>
                  Use My Location
                </button>
              </div>
          </div>

          <!-- Third Row: Latitude and Longitude -->
          <div class="row mb-3">
            <div class="col-md-6">
              <%= form.label :latitude, "Latitude", class: "form-label" %>
              <%= form.number_field :latitude, 
                  value: @latitude, 
                  step: 0.000001, 
                  class: "form-control bg-dark text-light border-secondary",
                  placeholder: "40.7128",
                  id: "latitude-field",
                  readonly: true %>
            </div>
            <div class="col-md-6">
              <%= form.label :longitude, "Longitude", class: "form-label" %>
              <%= form.number_field :longitude, 
                  value: @longitude, 
                  step: 0.000001, 
                  class: "form-control bg-dark text-light border-secondary",
                  placeholder: "-74.0060",
                  id: "longitude-field",
                  readonly: true %>
            </div>
          </div>

          <!-- Calculate Button -->
          <div class="row">
            <div class="col-12 text-center">
              <button type="submit" class="btn btn-primary btn-lg">
                <i class="bi bi-calculator me-2"></i>
                Calculate Planetary Hours
              </button>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Results -->
    <% if @planetary_hours %>
      <div class="card bg-dark border-success planetary-hours-card">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0">
            <i class="bi bi-calendar3 me-2"></i>
            Planetary Hours for <%= @planetary_hours[:date].strftime("%B %d, %Y") %>
          </h5>
        </div>
        <div class="card-body text-white">
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="text-center">
                <h6 class="text-success">
                  <i class="bi bi-sunrise me-2"></i>Sunrise
                </h6>
                <p class="h4 text-white"><%= @planetary_hours[:sunrise].strftime("%I:%M %p") %></p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="text-center">
                <h6 class="text-info">
                  <i class="bi bi-sunset me-2"></i>Sunset
                </h6>
                <p class="h4 text-white"><%= @planetary_hours[:sunset].strftime("%I:%M %p") %></p>
              </div>
            </div>
          </div>

          <!-- Day Hours -->
          <h6 class="text-success mb-3">
            <i class="bi bi-sun-fill me-2"></i>
            Day Hours (12 hours)
          </h6>
          <div class="row mb-4">
            <% @planetary_hours[:day_hours].each do |hour| %>
              <div class="col-md-6 col-lg-4 mb-3">
                <div class="card bg-light border-0">
                  <div class="card-body p-3 text-dark">
                    <div class="d-flex justify-content-between align-items-center">
                      <div>
                        <h6 class="mb-1">
                          <%= planet_symbol(hour[:planet]) %> <%= hour[:planet] %>
                        </h6>
                        <small class="text-muted">Hour <%= hour[:hour] %></small>
                      </div>
                      <div class="text-end">
                        <small class="text-dark">
                          <%= hour[:start_time].strftime("%I:%M") %> - 
                          <%= hour[:end_time].strftime("%I:%M") %>
                        </small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>

          <!-- Night Hours -->
          <h6 class="text-info mb-3">
            <i class="bi bi-moon-fill me-2"></i>
            Night Hours (12 hours)
          </h6>
          <div class="row">
            <% @planetary_hours[:night_hours].each do |hour| %>
              <div class="col-md-6 col-lg-4 mb-3">
                <div class="card bg-light border-0">
                  <div class="card-body p-3 text-dark">
                    <div class="d-flex justify-content-between align-items-center">
                      <div>
                        <h6 class="mb-1">
                          <%= planet_symbol(hour[:planet]) %> <%= hour[:planet] %>
                        </h6>
                        <small class="text-muted">Hour <%= hour[:hour] %></small>
                      </div>
                      <div class="text-end">
                        <small class="text-dark">
                          <%= hour[:start_time].strftime("%I:%M") %> - 
                          <%= hour[:end_time].strftime("%I:%M") %>
                        </small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>

    <!-- About Section -->
    <div id="about" class="card bg-dark border-info mb-4">
      <div class="card-header bg-info text-white">
        <h5 class="mb-0">
          <i class="bi bi-info-circle-fill me-2"></i>
          About Planetary Hours
        </h5>
      </div>
      <div class="card-body text-white">
        <p class="mb-3">
          Planetary hours are an ancient astrological system that divides each day and night into 12 unequal hours, 
          each ruled by one of the seven classical planets: Saturn, Jupiter, Mars, Sun, Venus, Mercury, and Moon.
        </p>
        <p class="mb-3">
          The day hours begin at sunrise and the night hours begin at sunset. Each hour is associated with specific 
          planetary energies that can influence the success of different activities.
        </p>
        <div class="col-md-6 col-lg-4 mb-3">
          <div class="card bg-secondary border-0">
            <div class="card-body p-3 text-white">
              <h6>Best Times for:</h6>
              <ul class="list-unstyled">
                <li><span class="fw-bold">☉ Sun:</span> Leadership, creativity, health</li>
                <li><span class="fw-bold">☽ Moon:</span> Intuition, emotions, family</li>
                <li><span class="fw-bold">☿ Mercury:</span> Communication, learning, travel</li>
                <li><span class="fw-bold">♀ Venus:</span> Love, beauty, relationships</li>
                <li><span class="fw-bold">♂ Mars:</span> Action, courage, competition</li>
                <li><span class="fw-bold">♃ Jupiter:</span> Growth, wisdom, expansion</li>
                <li><span class="fw-bold">♄ Saturn:</span> Discipline, structure, long-term goals</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

